; ---------------------------------------------------------
; 函式: print_string
; 功能: 在 16 位元實模式下使用 BIOS 中斷印出字串
; 參數: SI = 指向以 0 (null) 結尾的字串起始位址
; ---------------------------------------------------------

print_string:
    pusha             ; 將所有通用暫存器壓入堆疊保護起來 (AX, CX, DX, BX, SP, BP, SI, DI)

.loop:
    lodsb             ; 這個強大的指令會：
                      ; 1. 將 [DS:SI] 指向的內容讀入 AL
                      ; 2. 自動增加 SI (指向下一個字元)

    cmp al, 0         ; 檢查字元是否為 0 (字串結束符號)
    je .done          ; 如果是 0，跳轉到結束

    mov ah, 0x0e      ; BIOS 中斷 0x10 的功能號：0x0e (顯示字元)
    int 0x10          ; 呼叫 BIOS 視訊服務
    
    jmp .loop         ; 繼續處理下一個字元

.done:
    popa              ; 從堆疊還原所有暫存器，確保主程式的狀態不被破壞
    ret               ; 返回呼叫者